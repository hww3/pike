# $Id: Makefile.in,v 1.3 2001/07/01 11:36:34 grubba Exp $
@make_variables@
VPATH=@srcdir@:@srcdir@/../..:../..
OBJS=unicode_module.o normalize.o split.o buffer.o
MODULE_LDFLAGS=@LDFLAGS@ @LIBS@
CONFIG_HEADERS=@CONFIG_HEADERS@
@dynamic_module_makefile@

UNICODEDATA=../../UnicodeData.txt

$(SRCDIR)/unicode_module.c: $(SRCDIR)/unicode_module.cmod $(TMP_BINDIR)/precompile.pike
	$(RUNPIKE) $(TMP_BINDIR)/precompile.pike >"$@" "$(SRCDIR)/unicode_module.cmod" || { rm "$@"; exit 1; }

$(SRCDIR)/decompositions.h: $(SRCDIR)/make_decompose.pike $(SRCDIR)/$(UNICODEDATA)
	 $(RUNPIKE) $(SRCDIR)/make_decompose.pike 		\
                    < $(SRCDIR)/$(UNICODEDATA) > "$@" || { rm "$@"; exit 1; }

$(SRCDIR)/canonicals.h: $(SRCDIR)/make_canonicals.pike $(SRCDIR)/$(UNICODEDATA)
	 $(RUNPIKE) $(SRCDIR)/make_canonicals.pike 		\
                    < $(SRCDIR)/$(UNICODEDATA) > "$@" || { rm "$@"; exit 1; }

$(SRCDIR)/wordbits.h: $(SRCDIR)/make_wordbits.pike $(SRCDIR)/$(UNICODEDATA)
	 $(RUNPIKE) $(SRCDIR)/make_wordbits.pike 		\
                    < $(SRCDIR)/$(UNICODEDATA) > "$@" || { rm "$@"; exit 1; }

unicode_module.o: $(SRCDIR)/unicode_module.c $(SRCDIR)/wordbits.h         \
		  $(SRCDIR)/canonicals.h     			\
		  $(SRCDIR)/decompositions.h

split.o: $(SRCDIR)/wordbits.h

normalize.o: $(SRCDIR)/canonicals.h $(SRCDIR)/decompositions.h

@dependencies@
