AC_INIT(mpz_glue.c)
AC_CONFIG_HEADER(gmp_machine.h)

AC_PROG_CC
AC_PROG_RANLIB
AC_SUBST(RANLIB)

AC_CHECK_HEADERS(gmp.h)
AC_CHECK_LIB(gmp, mpz_set_si)

AC_MSG_CHECKING(if libgmp is new enough)
AC_CACHE_VAL(lpc_cv_lib_gmp_is_new_enough,
[
AC_TRY_COMPILE([#include <gmp.h>],[
mpz_t foo;
return 0;
],lpc_cv_lib_gmp_is_new_enough=yes,lpc_cv_lib_gmp_is_new_enough=no)
])

if test "$lpc_cv_lib_gmp_is_new_enough" = yes; then
  AC_MSG_RESULT(yes)
  AC_DEFINE(HAVE_NEW_GMP)
else
  AC_MSG_RESULT(no)
fi

AC_OUTPUT(Makefile,echo FOO >stamp-h )


