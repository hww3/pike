# $Id: Makefile.in,v 1.22 2002/01/27 00:54:00 mast Exp $
@make_variables@
VPATH=@srcdir@:@srcdir@/../..:../..
MODULE_LDFLAGS=@LDFLAGS@ @LIBS@
OBJS=mpz_glue.o next_prime.o my_mpz_xor.o mpq.o mpf.o
SRC_TARGETS=prime_table.out

PRIME_LIMIT=1024

CONFIG_HEADERS=@CONFIG_HEADERS@

@dynamic_module_makefile@

# UnixWare make needs help to find the source file...
mpq.o: $(SRCDIR)/mpq.c

# UnixWare make needs help to find the source file...
mpf.o: $(SRCDIR)/mpf.c

next_prime.o: prime_table.out

prime_table.out: prime_table_@CROSS@
	./prime_table_@CROSS@ $(PRIME_LIMIT) >prime_table.out

# Not cross-compiling
prime_table_no: $(SRCDIR)/prime_table.c
	$(CC) $(CFLAGS) $(SRCDIR)/prime_table.c -o prime_table_no

# Cross-compiling
prime_table_yes: $(SRCDIR)/prime_table.pike
	test -f ./prime_table_yes || ln -s $(SRCDIR)/prime_table.pike ./prime_table_yes || cp $(SRCDIR)/prime_table.pike ./prime_table_yes

@dependencies@
