# $Id: Makefile.in,v 1.15 2001/01/15 21:08:33 grubba Exp $
@make_variables@
VPATH=@srcdir@:@srcdir@/../..:../..
MODULE_LDFLAGS=@LDFLAGS@ @LIBS@
OBJS=mpz_glue.o next_prime.o my_mpz_xor.o

PRIME_LIMIT=1024

CONFIG_HEADERS=@CONFIG_HEADERS@

@dynamic_module_makefile@

next_prime.o: prime_table.out

prime_table.out: prime_table
	./prime_table $(PRIME_LIMIT) >prime_table.out

prime_table: prime_table.@CROSS@
	test -f ./prime_table || ln -s prime_table.@CROSS@ ./prime_table || cp prime_table.@CROSS@ ./prime_table

# Not cross-compiling
prime_table.no: $(SRCDIR)/prime_table.c
	$(CC) $(CFLAGS) $(SRCDIR)/prime_table.c -o prime_table.no

# Cross-compiling
prime_table.yes: $(SRCDIR)/prime_table.pike
	test -f ./prime_table.yes || ln -s $(SRCDIR)/prime_table.pike ./prime_table.yes || cp $(SRCDIR)/prime_table.pike ./prime_table.yes

depend: prime_table.out

@dependencies@
